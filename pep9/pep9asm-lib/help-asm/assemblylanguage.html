<!DOCTYPE HTML PUBLIC "-//W3C/DTD HTML 5.2//EN">

<html>
<head>
 <title> Pep/9: Assembly Language Documentation </title>
  <style type="text/css" media="all">
   code { font-family:Courier, 'Courier New', monospace; font-size:11pt }
   img { vertical-align:text-top; }
   h4 { margin-bottom: 0; border-bottom-width: 0; padding-bottom: 0; }
  </style>
</head>
<body bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#0000FF" alink="#0000FF">
<table bgcolor="#FB9F14" width="100%" cellpadding="2" cellspacing="0" border="0">
<tr><td>
<p style="text-align:center; font-family:helvetica, arial, sans-serif; font-size:14pt; font-weight:bold; color: #29315E">
Assembly Language
</p>
</td></tr>
</table>
<p>
 Reference: <i>Computer Systems</i>, Chapters 5, 6.
<p>
An assembly language program is a sequence of lines, each line containing either an instruction
from the Pep/9 instruction set specfied by a mnemonic,
or a pseudo-operation, also called a pseudo-op or dot command.
The assembly language program must end with the pseudo-op <code>.END</code>.
<p>
 <a name = "Topics">Topics:</a>
 <a href="#Writing">Writing an assembly language program</a>,
 <a href="#Run">The Run Source option</a>,
 <a href="#ExecStats">Execution statistics</a>,
 <a href="#Trace">Trace tags</a>,
 <a href="#Syntax">Assembly language syntax summary</a>.

<h3><a name="Writing">Writing an assembly language program</a></h3>

Writing an assembly language program is a four-step process.
<p>
<h4>Step 1.</h4>
With this Pep/9 application, you write the assembly language program using the built-in text editor in the Source Code pane.
The following figure shows the source program after entering the program from Figure 5.19 of the textbook.
<p>
<img src="qrc:/help-asm/images/fig0519.png" alt="fig0519" hspace=10 vspace=10>
<p>
Strict formatting is not required as long as there is one instruction or dot command per line,
and at least one space between a mnemonic and an operand specifier.
For example, the above program could be entered as follows.
<p>
<img src="qrc:/help-asm/images/fig0519unformatted.png" alt="fig0519unformatted" hspace=10 vspace=10>
<p>
<h4>Step 2.</h4>
After writing the assembly language program, assemble it by selecting Build&rarr;Assemble Source from the menu
or clicking on the hammer icon in the tool bar.
<p>
<img src="qrc:/help-asm/images/assemble.png" alt="assemble" hspace=10 vspace=10>
<img src="qrc:/help-asm/images/assembleicon.png" alt="assembleicon" hspace=10 vspace=10>
<p>
If there are no errors in the program a message to that effect will appear at the bottom of the main window.
<p>
<img src="qrc:/help-asm/images/assemblysucceeded.png" alt="assemblysucceeded" hspace=10 vspace=10>
<p>
The translated program will appear in the Object Code pane,
and a formatted listing will appear in the Assembler Listing pane.
<p>
<img src="qrc:/help-asm/images/fig0519assembled.png" alt="fig0519assembled" hspace=10 vspace=10>
<p>
If there is an error in your program, an error message will appear in the source code pane.
The following screenshot shows what would happen if you fail to supply the addressing mode for
the <code>STRO</code> instruction.
<P>
<img src="qrc:/help-asm/images/fig0519error.png" alt="fig0519error" hspace=10 vspace=10>
<p>
If you would like, you can select Edit&rarr;Remove Error Messages from the menu to delete the error message.
Then, you can correct your error and try to assemble your program again.
It is not necessary to remove the error message before correcting your program, as error messages
are automatically removed when you reassemble your program.
<p>
<img src="qrc:/help-asm/images/removeerrormessages.png" alt="removeerrormessages" hspace=10 vspace=10>
<p>
If you want to format your source code select Edit&rarr;Assemble & Format from the menu.
Your source code will be assembled and replaced with the standard formatted source code as it
appears in the Assembler Listing pane.
<p>
<img src="qrc:/help-asm/images/formatfromlisting.png" alt="formatfromlisting" hspace=10 vspace=10>
<p>
<h4>Step 3.</h4>
Load your program by selecting Build&rarr;Load Object Code from the menu.
<p>
<img src="qrc:/help-asm/images/load.png" alt="load" hspace=10 vspace=10>
<p>
<h4>Step 4.</h4>
To execute the program select Build&rarr;Execute from the menu.
<p>
<img src="qrc:/help-asm/images/execute.png" alt="execute" hspace=10 vspace=10>
<p>
<a href="#Topics">Scroll to topics</a>.

<h3><a name="Run">The Run Source option</a></h3>

The three steps &mdash; Assemble, Load, Execute &mdash; are combined in the single option called Run Source.
You can initiate a run by selecting Build&rarr;Run Source from the menu or by clicking on the Run Source icon in the tool bar.
<p>
<img src="qrc:/help-asm/images/runsource.png" alt="runsource" hspace=10 vspace=10>
<img src="qrc:/help-asm/images/runicon.png" alt="runicon" hspace=10 vspace=10>
<p>
<a href="#Topics">Scroll to topics</a>.

<h3><a name="ExecStats">Execution statistics</a></h3>

Text for execution statistics goes here.
<p>
More text for execution statistics goes here.
<p>
More text for execution statistics goes here.
<p>
<a href="#Topics">Scroll to topics</a>.

<h3><a name="Trace">Trace tags</a></h3>

<p>
<table border cellspacing=0 cellpadding=5>
 <tr>
  <th>Trace tag</th> <th>Format</th>
 </tr>
 <tr>
  <td><code>#1c</code></td> <td>One-byte character</td>
 </tr>
 <tr>
  <td><code>#1d</code></td> <td>One-byte decimal</td>
 </tr>
 <tr>
  <td><code>#2d</code></td> <td>Two-byte decimal</td>
 </tr>
 <tr>
  <td><code>#1h</code></td> <td>One-byte hexadecimal</td>
 </tr>
 <tr>
  <td><code>#2h</code></td> <td>Two-byte hexadecimal</td>
 <tr>
  <td><code>#2d4a</code></td> <td>Two-byte decimal, four-cell array (example)</td>
 </tr>
</table>

<p>
If your program assembles correctly but there is an error in your trace tags, a trace tag warning is displayed.
For example, here is what happens if you make an error in one of the trace tags in the program from Figure 5.27.
<p>
<img src="qrc:/help-asm/images/fig0527tracetagwarning.png" alt="fig0527tracetagwarning" hspace=10 vspace=10>
<p>
Programs with trace tag warnings have assembled correctly and will still run.
In the debugger, you can still single step through the program, set break points, and trace memory in the Memory Dump pane.
However, the symbolic trace feature that shows the C memory model graphically in the Memory Trace pane is disabled until
you fix the trace tag error and reassemble your program.
<p>
<a href="#Topics">Scroll to topics</a>.

<h3><a name="Syntax">Assembly language syntax summary</a></h3>

A decimal integer starts with an optional <code>+</code> or <code>-</code>, followed by a decimal digit followed by zero or more digits.
<p>
A decimal integer used with <code>.BYTE</code> ranges from -128 to 255, otherwise from -32768 to 65535.
<p>
A hex integer starts with <code>0x</code> or <code>0X</code> followed by one or more hex digits (upper- or lower-case).
<p>
A hex integer used with <code>.BYTE</code> ranges from 0 to FF, otherwise from 0 to FFFF.
<p>
A single character is enclosed in single quotes, as in <code>'t'</code>.
<p>
An ASCII string is enclosed in double quotes, as in <code>"My string."</code>.
<p>
An arbitrary byte can be included in a string or a character by prefixing exactly two hex digits with <code>\x</code> or <code>\X</code>, as in <code>"Null terminated\x00"</code>.
<p>
A double quote is included in a string by prefixing it with <code>\</code>, as in <code>"She said, \"Hello\"."</code>.
<p>
A single quote is included in a character by prefixing it with <code>\</code>, as in <code>'\''</code>.
<p>
A backslash character is included in a string or character by prefixing it with <code>\</code>, as in <code>"My bash is \\."</code> and <code>'\\'</code>.
<p>
The following letters, when preceded by <code>\</code>, generate non printable characters&#151;<code>b</code> backspace, <code>f</code> form feed, <code>n</code> line feed (new line), <code>r</code> carriage return, <code>t</code> horizontal tab, <code>v</code> vertical tab&#151;in string and character constants, as in <code>"\n Starts on a new line."</code> and <code>'\n'</code>.
<p>
A backslash character followed by any character other than <code>b</code>, <code>f</code>, <code>n</code>, <code>r</code>, <code>t</code>, <code>v</code>, <code>x</code>, <code>X</code>, <code>"</code>, <code>'</code>, or <code>\</code> (except for the second of a pair of <code>\</code>&#146;s) is an error.
<p>
A double quote preceded by a backslash in a character is not necessary but is valid and represents one double quote.
<p>
A single quote preceded by a backslash in a string is not necessary but is valid and represents one single quote.
<p>
A constant used as an operand specifier that occupies less than two bytes is right justified in the two-byte field.
<p>
A constant used as an operand specifier that occupies more than two bytes is an error.
<p>
<a href="#Topics">Scroll to topics</a>.

<p>
</body>
</html>
